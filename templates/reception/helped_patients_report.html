{% extends 'base.html' %}
{% block title %}Helped Patients Report - Township Clinic{% endblock %}
{% block styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/reception.css') }}?v=1">
{% endblock %}
{% block content %}
<div class="dashboard-content">
    <h2 class="text-3xl font-bold mb-8">Helped Patients Report</h2>
    {% if helped_patients %}
    <table class="table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Patient</th>
                <th>Appointment Date</th>
                <th>Nurse</th>
                <th>Timestamp</th>
                <th>Reason</th>
                <th>Notes</th>
            </tr>
        </thead>
        <tbody>
            {% for patient in helped_patients %}
            <tr>
                <td>{{ patient.id }}</td>
                <td>{{ patient.patient_name }}</td>
                <td>{{ patient.appointment_date }}</td>
                <td>{{ patient.nurse_name }}</td>
                <td>{{ patient.helped_timestamp }}</td>
                <td>{{ patient.reason or 'Not specified' }}</td>
                <td>{{ patient.notes }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p class="text-center text-gray-600">No helped patients found.</p>
    {% endif %}
</div>
{% endblock %}

{% block extra_scripts %}
<script>
    fetch('/helped_patients_report', {
        headers: { 'Accept': 'application/json' },
        credentials: 'include'
    })
    .then(response => response.json())
    .then(data => {
        console.log('Helped Patients:', data.helped_patients);
    })
    .catch(error => console.error('Error fetching report data:', error));
</script>
{% endblock %}