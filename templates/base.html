<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Township Clinic{% endblock %}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}" />
  <!-- Include FontAwesome or your icon library -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
</head>
<body class="{% if session.get('role') %}non-default-page{% else %}default-page{% endif %}">
  
  <!-- Sidebar -->
  <nav class="sidebar" role="navigation" aria-label="Sidebar Navigation" tabindex="0" aria-expanded="true" aria-hidden="false" aria-controls="main-content">
    <div class="logo" aria-label="Clinic Logo">Township Clinic</div>
    <div class="user-info" aria-label="Logged in user info">
      <img src="{{ url_for('static', filename='profile_images/' + user_details.get('profile_image', 'default.jpg')) }}" alt="User profile image" width="40" height="40" />
      <div>
        <span style="font-weight: 600;">
          {{ user_details.get('first_name', '') }} {{ user_details.get('last_name', '') }}!
        </span><br/>
        <small>Staff Number: {{ user_details.get('staff_number', 'N/A') }}</small>
      </div>
    </div>
    <ul role="menu" aria-label="Primary Menu">
      {% if session.get('role') == 'admin' %}
        <li role="none"><a role="menuitem" href="{{ url_for('overview') }}"><i class="fas fa-eye"></i> Overview</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('admin_dashboard') }}"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('edit_employee') }}"><i class="fas fa-user-edit"></i> Edit Profile</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('system_settings') }}"><i class="fas fa-cogs"></i> System Settings</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('admin_report') }}"><i class="fas fa-chart-bar"></i> Reports</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('user_management') }}"><i class="fas fa-users"></i> Users</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('staff_counseling') }}"><i class="fas fa-users-cog"></i> Staff Counseling & Development</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('calendar') }}"><i class="fas fa-calendar"></i> Calendar</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('announcements') }}"><i class="fas fa-bullhorn"></i> Announcements</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('preferences') }}"><i class="fas fa-sliders-h"></i> Preferences</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('worksite_setup') }}"><i class="fas fa-tools"></i> Worksite Setup</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('trusted_application') }}"><i class="fas fa-shield-alt"></i> Trusted Application</a></li>
      {% elif session.get('role') == 'doctor' %}
        <li role="none"><a role="menuitem" href="{{ url_for('doctor_overview') }}"><i class="fas fa-eye"></i> Overview</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('doctor_dashboard') }}"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('patients_list') }}"><i class="fas fa-users"></i> Patients</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('edit_employee') }}"><i class="fas fa-user-edit"></i> Edit Profile</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('doctor_report') }}"><i class="fas fa-chart-bar"></i> Reports</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('appointment_homepage') }}"><i class="fas fa-calendar-check"></i> Appointments</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('staff_counseling') }}"><i class="fas fa-users-cog"></i> Staff Counseling & Development</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('calendar') }}"><i class="fas fa-calendar"></i> Calendar</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('announcements') }}"><i class="fas fa-bullhorn"></i> Announcements</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('preferences') }}"><i class="fas fa-sliders-h"></i> Preferences</a></li>
      {% elif session.get('role') == 'nurse' %}
        <li role="none"><a role="menuitem" href="{{ url_for('nurse_overview') }}"><i class="fas fa-eye"></i> Overview</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('nurse_dashboard') }}"><i class="fas fa-stethoscope"></i> Dashboard</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('edit_employee') }}"><i class="fas fa-user-edit"></i> Edit Profile</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('patients_list') }}"><i class="fas fa-users"></i> Patients</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('appointment_homepage') }}"><i class="fas fa-calendar-check"></i> Appointments</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('staff_counseling') }}"><i class="fas fa-users-cog"></i> Staff Counseling & Development</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('calendar') }}"><i class="fas fa-calendar"></i> Calendar</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('announcements') }}"><i class="fas fa-bullhorn"></i> Announcements</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('preferences') }}"><i class="fas fa-sliders-h"></i> Preferences</a></li>
      {% elif session.get('role') == 'receptionist' %}
        <li role="none"><a role="menuitem" href="{{ url_for('reception_overview') }}"><i class="fas fa-eye"></i> Overview</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('reception_dashboard') }}"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('edit_employee') }}"><i class="fas fa-user-edit"></i> Edit Profile</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('search_patient') }}"><i class="fas fa-search"></i> Search Patient</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('add_patient') }}"><i class="fas fa-user-plus"></i> Add New Patient</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('staff_counseling') }}"><i class="fas fa-users-cog"></i> Staff Counseling & Development</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('calendar') }}"><i class="fas fa-calendar"></i> Calendar</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('announcements') }}"><i class="fas fa-bullhorn"></i> Announcements</a></li>
        <li role="none"><a role="menuitem" href="{{ url_for('preferences') }}"><i class="fas fa-sliders-h"></i> Preferences</a></li>
      {% endif %}

      <li role="none"><a role="menuitem" href="{{ url_for('system_guides') }}"><i class="fas fa-book"></i> System Guides</a></li>
      <li role="none"><a role="menuitem" href="{{ url_for('email_info') }}"><i class="fas fa-envelope"></i> Email Info</a></li>
      <li role="none"><a role="menuitem" href="{{ url_for('help') }}"><i class="fas fa-question-circle"></i> Help</a></li>
      <li role="none"><a role="menuitem" href="{{ url_for('logout') }}"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
    </ul>
  </nav>

  <!-- Main Content -->
  <main class="dashboard-content" id="main-content" tabindex="-1">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert {{ category }}">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}
    
    {% block content %}{% endblock %}
  </main>

</body>
</html>
