{% extends "base.html" %}
{% block title %}Overview - Township Clinic{% endblock %}
{% block content %}
<div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-8">Overview</h1>
    <p class="text-lg mb-6">Welcome to your personalized dashboard, where you can track your performance, discover insights, and take quick actions tailored to your clinic role.</p>

    {% if session.get('role') == 'admin' %}
        <h2 class="text-2xl font-semibold mb-4">Clinic Administration</h2>
        <ul class="space-y-2 mb-6">
            <li><strong>Total Users Registered:</strong> {{ total_users }}</li>
            <li><strong>Active Staff on Duty:</strong> {{ active_staff }}</li>
            <li><strong>System Uptime (days):</strong> {{ system_uptime }}</li>
            <li><strong>Open Support Tickets:</strong> {{ open_tickets }}</li>
        </ul>
        <p class="italic text-gray-600 mb-4">
            Manage clinic users, assign roles, view usage analytics, and monitor daily operations. 
            <br>
            <span class="text-blue-600">Tip: Review recent audit logs for policy violations.</span>
        </p>

    {% elif session.get('role') == 'doctor' %}
        <h2 class="text-2xl font-semibold mb-4">Doctor’s Dashboard</h2>
        <ul class="space-y-2 mb-6">
            <li><strong>Total Patients Under Your Care:</strong> {{ total_patients }}</li>
            <li><strong>Today's Appointments:</strong> {{ today's_appointments }}</li>
            <li><strong>Critical Cases Awaiting Review:</strong> {{ critical_cases }}</li>
            <li><strong>Prescriptions Written This Month:</strong> {{ prescriptions_this_month }}</li>
        </ul>
        <div class="mb-4 italic text-gray-600">
            Your patient panel for today is ready.<br>
            <span class="text-blue-600">Remember: Add notes after each consultation for better patient continuity.</span>
        </div>
        <p class="flex space-x-4">
            <a href="{{ url_for('view_appointments') }}" class="btn btn-success">Start Consultations</a>
            <a href="{{ url_for('lab_results') }}" class="btn btn-outline-info">Review Lab Results</a>
        </p>

    {% elif session.get('role') == 'nurse' %}
        <h2 class="text-2xl font-semibold mb-4">Nurse’s Hub</h2>
        <ul class="space-y-2 mb-6">
            <li><strong>Pending Vitals to Collect:</strong> {{ pending_vitals }}</li>
            <li><strong>Patients to Medicate Today:</strong> {{ medicating_today }}</li>
            <li><strong>Immunizations Scheduled:</strong> {{ immunizations_today }}</li>
            <li><strong>Supplies Running Low:</strong> {{ supplies_low|join(", ") if supplies_low else 'All stocked' }}</li>
        </ul>
        <div class="mb-4 italic text-gray-600">
            Organize your ward rounds and ensure patient comfort.<br>
            <span class="text-pink-600">Quick Link: Double-check high-priority cases for vital monitoring.</span>
        </div>
        <p class="flex space-x-4">
            <a href="{{ url_for('vital_tasks') }}" class="btn btn-warning">Begin Vital Collection</a>
            <a href="{{ url_for('inventory') }}" class="btn btn-outline-primary">Manage Supplies</a>
        </p>

    {% elif session.get('role') == 'receptionist' %}
        <h2 class="text-2xl font-semibold mb-4">Front Desk Overview</h2>
        <ul class="space-y-2 mb-6">
            <li><strong>Today's Scheduled Patients:</strong> {{ patients_today|length }}</li>
            <li><strong>Total Check-ins So Far:</strong> {{ checkins_today }}</li>
            <li><strong>Walk-ins Waiting:</strong> {{ walkins_waiting }}</li>
            <li><strong>Missed Appointments:</strong> {{ missed_appointments }}</li>
        </ul>
        <div class="mb-4 italic text-gray-600">
            Greet patients, manage appointments, and keep things flowing smoothly.<br>
            <span class="text-orange-600">Hint: Send SMS reminders to upcoming appointments.</span>
        </div>
        <p class="flex space-x-4">
            <a href="{{ url_for('appointments') }}" class="btn btn-info">Manage Appointments</a>
            <a href="{{ url_for('patient_register') }}" class="btn btn-outline-success">Add Walk-in Patient</a>
        </p>
    {% endif %}
</div>
{% endblock %}